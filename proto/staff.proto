syntax = "proto3";
option go_package = "crspy2/licenses/protofiles";
package protofiles;


import "google/protobuf/empty.proto";
import "globals.proto";

message StaffObject {
  string id = 1;
  string name = 2;
  int32 role = 3;
  optional string image = 4;
  repeated string perms = 5;
  bool approved = 6;
}

message StaffIdRequest {
  string staffId = 1;
}

service Staff {
  rpc SetStaffAccess(StaffAccessRequest) returns (ApprovalResponse);

  rpc GetStaff(StaffIdRequest) returns (StaffObject);
  rpc GetAllStaffStream(google.protobuf.Empty) returns (stream StaffObject);

  rpc SetStaffPermissions(MultiPermissionRequest) returns (StandardResponse);
  rpc SetStaffRole(StaffRoleRequest) returns (StandardResponse);
}

message StaffAccessRequest {
  string staffId = 1;
  bool approved = 2;
}

message ApprovalResponse {
  string message = 1;
  StaffObject staff = 2;
}

message MultiPermissionRequest {
  string staffId = 1;
  repeated int64 permissions = 2;
}

message SinglePermissionRequest {
  string staffId = 1;
  int64 permission = 2;
}

message StaffRoleRequest {
  string staffId = 1;
  int32 role = 2;
}